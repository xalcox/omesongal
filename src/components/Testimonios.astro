<section class="bg-white py-16 px-6 sm:px-10 text-center">
  <h2 class="text-4xl font-serif font-bold text-blue-900 mb-10">
    Opiniones de nuestros clientes
  </h2>

  <div class="relative max-w-6xl mx-auto overflow-hidden">
    <!-- Fade lateral más sutil -->
    <div class="pointer-events-none absolute left-0 top-0 h-full w-32 bg-gradient-to-r from-white to-transparent z-10 hidden lg:block"></div>
    <div class="pointer-events-none absolute right-0 top-0 h-full w-32 bg-gradient-to-l from-white to-transparent z-10 hidden lg:block"></div>

    <!-- Botones -->
    <button id="prevBtn" class="absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-blue-900 text-white px-3 py-1 rounded-full shadow hover:bg-blue-800">
      ←
    </button>
    <button id="nextBtn" class="absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-blue-900 text-white px-3 py-1 rounded-full shadow hover:bg-blue-800">
      →
    </button>

    <!-- Carrusel -->
    <div id="carousel-track" class="flex transition-transform duration-500 ease-in-out w-full">
      <!-- Testimonio 1 -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★★</div>
            <p class="text-blue-900 text-base mb-4">En este lugar se pueden saborear los mejores pinchos de toda la comarca.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Roberto G. en TripAdvisor</p>
        </div>
      </div>

      <!-- Testimonio 2 -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★★</div>
            <p class="text-blue-900 text-base mb-4">Comida excelente, local precioso y trato inmejorable. Recomendado 100%.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Isabel B. en TripAdvisor</p>
        </div>
      </div>

      <!-- Testimonio 3 -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★★</div>
            <p class="text-blue-900 text-base mb-4">Muy recomendable. Comimos cordero, ternera y chipirones. Riquísimo.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Amparo E. en TripAdvisor</p>
        </div>
      </div>

      <!-- Testimonio 4 -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★★</div>
            <p class="text-blue-900 text-base mb-4">Muy buen servicio, el sitio muy agradable tanto dentro como en la terraza. Producto fresco muy bien preparado. La cazuela de pulpo y langostinos espectacular.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Lidia P. en TripAdvisor</p>
        </div>
      </div>

      <!-- Testimonio 5 -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★★</div>
            <p class="text-blue-900 text-base mb-4">Es un auténtico lujo encontrar hoy en día un sitio como este, donde no solo el producto es inmejorable, sino que el trato es uno de los aspectos más cuidados.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Raquel D. en TripAdvisor</p>
        </div>
      </div>

      <!-- Testimonio 6 (4 estrellas) -->
      <div class="w-full sm:w-1/2 lg:w-1/3 shrink-0 px-4">
        <div class="bg-blue-50 p-6 rounded-lg shadow text-left h-full flex flex-col justify-between min-h-[280px]">
          <div>
            <div class="text-yellow-400 text-xl mb-2">★★★★☆</div>
            <p class="text-blue-900 text-base mb-4">El sitio es muy agradable. Me arriesgaría a decir que es de los más cómodos en Cedeira. Muy buen trato, aunque tardaron un poco en traer los platos.</p>
          </div>
          <p class="text-blue-700 font-semibold mt-4">— Gabriel D. en TripAdvisor</p>
        </div>
      </div>
    </div>

    <!-- Indicadores -->
    <div class="flex justify-center gap-2 mt-6" id="carousel-indicators"></div>
  </div>

  <!-- Botón debajo -->
  <a href="https://www.tripadvisor.es/Restaurant_Review-g1064070-d6936665-Reviews-O_Meson-Cedeira_Province_of_A_Coruna_Galicia.html"
     target="_blank" rel="noopener noreferrer"
     class="mt-10 inline-flex px-5 py-2 bg-blue-900 text-white hover:bg-blue-800 font-semibold rounded-full text-sm transition-all duration-300">
    Ver más en TripAdvisor
  </a>
</section>

<!-- Script final -->
<script>
  let slides = [];
  let autoplayTimer;

  document.addEventListener("DOMContentLoaded", () => {
    const track = document.getElementById("carousel-track");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const indicatorsContainer = document.getElementById("carousel-indicators");

    slides = [...track.children];
    const originalLength = slides.length;
    let index = 0;

    // Clonar slides para loop infinito
    slides.forEach(slide => {
      const clone = slide.cloneNode(true);
      track.appendChild(clone);
    });

    slides = [...track.children];

    // Crear indicadores
    for (let i = 0; i < originalLength; i++) {
      const dot = document.createElement("span");
      dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === 0 ? "bg-blue-900" : "bg-blue-300 opacity-50"}`;
      indicatorsContainer.appendChild(dot);
    }

    const indicators = indicatorsContainer.children;

    const updateCarousel = (animated = true) => {
      const slideWidth = slides[0].offsetWidth;
      track.style.transition = animated ? "transform 0.5s ease-in-out" : "none";
      track.style.transform = `translateX(-${index * slideWidth}px)`;

      [...indicators].forEach((dot, i) => {
        dot.className = `w-3 h-3 rounded-full transition-all duration-300 ${i === (index % originalLength) ? "bg-blue-900" : "bg-blue-300 opacity-50"}`;
      });
    };

    const resetAutoplay = () => {
      clearTimeout(autoplayTimer);
      autoplayTimer = setTimeout(() => {
        nextBtn.click();
      }, 5000);
    };

    prevBtn.addEventListener("click", () => {
      if (index === 0) {
        index = slides.length - originalLength;
        updateCarousel(false);
        setTimeout(() => {
          index--;
          updateCarousel();
        }, 20);
      } else {
        index--;
        updateCarousel();
      }
      resetAutoplay();
    });

    nextBtn.addEventListener("click", () => {
      index++;
      updateCarousel();
      if (index >= slides.length - originalLength) {
        setTimeout(() => {
          index = 0;
          updateCarousel(false);
        }, 500);
      }
      resetAutoplay();
    });

    resetAutoplay(); // iniciar autoplay
  });
</script>
